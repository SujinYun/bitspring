<%@ page language="java" contentType="text/html; charset=UTF-8"
    pageEncoding="UTF-8"%>
<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>bbsAccount.jsp</title>
<script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>
</head>
<body>

<form action="accountAf.do" method="post">

id:<input type="text" placeholder="id를 입력하세요" id="_id">
<button type="button" id="_idcheck">중복확인</button>
<p id="_resultMsg"></p>

pwd:<input type="password" placeholder="password를 입력하세요" id="_pwd"><br><br>
name:<input type="text" id="_name"><br><br>
email:<input type="text" id="_email"><br><br>

<input type="submit" value="회원가입">

</form>

</body>

<script type="text/javascript">
$(function () {
	$("#_idcheck").on("click", function() {
		var id = $("#_id").val();
		alert(id);
		
		if($("#_id").val().trim() == ""){
			alert("id를 입력해주십시오.");
			$("#_id").focus();
			// 커서가 id칸에 맞춰짐
		}else{
		$.ajax({
			url:"idcheck.do",
			type:"get",
			data:"id="+$("#_id").val(),
			success:function(data){
				if(data == 0){
					$("#_id").text(data.trim());
					$("_resultMsg").text("사용 가능");
					$("_resultMsg").attr("style", "color:#00f")
					
				}else{
					$("_resultMsg").text("사용 불가");
					$("_resultMsg").attr("style", "color:#f00")
				}
			},
			error:function(){
				alert("error");
			}
		});
		}
	});
});

</script>

</html>